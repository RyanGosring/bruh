(library
 (name dune_rpc_tests)
 (modules dune_rpc_tests)
 (inline_tests)
 (libraries
  ocaml_config
  dune_rpc_private
  dune_rpc_server
  stdune
  test_scheduler
  fiber
  ;; This is because of the (implicit_transitive_deps false)
  ;; in dune-project
  ppx_expect.config
  ppx_expect.config_types
  ppx_expect.common
  base
  ppx_inline_test.config)
 (preprocess
  (pps ppx_expect)))

(library
 (name dune_rpc_client_tests)
 (modules dune_rpc_client_tests)
 (inline_tests
  (deps
   (package dune)))
 (libraries
  dune_rpc
  csexp_rpc
  unix
  dune_engine
  csexp
  stdune
  lwt
  lwt.unix
  ;; This is because of the (implicit_transitive_deps false)
  ;; in dune-project
  ppx_expect.config
  ppx_expect.config_types
  ppx_expect.common
  base
  ppx_inline_test.config)
 (preprocess
  (pps ppx_expect)))
