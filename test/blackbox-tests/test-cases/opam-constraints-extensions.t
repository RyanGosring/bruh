TODO:
- version in extensions themselves (each extension declares in which version of
  dune lang the constraint is generated)
- test versioning
- can an extension push different constraints based on the extension version?
- what to do if constraint is already present?

  $ cat > dune-project << EOF
  > (lang dune 3.17)
  > (using mdx 0.3)
  > (generate_opam_files)
  > (package
  >  (name n)
  >  (allow_empty))
  > EOF

  $ dune build

  $ cat n.opam
  # This file is generated by dune, edit dune-project instead
  opam-version: "2.0"
  depends: [
    "dune" {>= "3.17"}
    "odoc" {with-doc}
  ]
  build: [
    ["dune" "subst"] {dev}
    [
      "dune"
      "build"
      "-p"
      name
      "-j"
      jobs
      "@install"
      "@runtest" {with-test}
      "@doc" {with-doc}
    ]
  ]
